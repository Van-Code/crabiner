# ============================================
# MISSED CONNECTIONS - ENVIRONMENT CONFIG
# ============================================
# IMPORTANT: Never commit this file to version control
# Copy this template and fill in your actual values

# ============================================
# APPLICATION
# ============================================
NODE_ENV=production
PORT=3000

# ============================================
# DATABASE
# ============================================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://username:password@host:port/database

# Example for local development:
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/missed_connections

# Example for cloud (Heroku, Railway, etc):
# DATABASE_URL=postgresql://user:pass@host.compute.amazonaws.com:5432/dbname

# ============================================
# EMAIL / SMTP CONFIGURATION
# ============================================
# SMTP server settings (for sending emails)
SMTP_HOST=mail.spacemail.com
SMTP_PORT=465
SMTP_USER=support@crabiner.com
SMTP_PASS=*RTTLr3dCq

# Email addresses
SMTP_FROM=support@crabiner.com
RELAY_DOMAIN=crabiner.com

# ============================================
# GOOGLE OAUTH
# ============================================
GOOGLE_CLIENT_ID=your_google_client_id_here
GOOGLE_CLIENT_SECRET=your_google_client_secret_here
GOOGLE_CALLBACK_URL=http://localhost:3000/auth/google/callback

# ============================================
# JWT & TOKENS
# ============================================
# Secret for signing JWT access tokens (generate with: openssl rand -base64 32)
JWT_SECRET=generate_a_secure_random_jwt_secret_here

# Refresh token cookie name
REFRESH_COOKIE_NAME=refreshToken

# Application base URL
APP_BASE_URL=http://localhost:3000
# ============================================
# SECURITY
# ============================================
# Encryption key for contact emails (MUST be at least 32 characters)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=generate_a_secure_random_32_character_key_here_12345678

# Allowed origins (comma-separated, no spaces)
# Include your production domain and any development URLs
ALLOWED_ORIGINS=https://crabiner.com,https://www.crabiner.com

# For local development, add:
ALLOWED_ORIGINS=https://crabiner.com,http://localhost:3000

# ============================================
# RATE LIMITING
# ============================================
# Maximum posts per IP address per 24 hours
MAX_POSTS_PER_DAY=5

# Maximum replies per IP address per 24 hours
MAX_REPLIES_PER_DAY=20

# Adjust these values based on your community size:
# Small community (< 100 users): 3 posts, 15 replies
# Medium community (100-1000 users): 5 posts, 20 replies
# Large community (1000+ users): 10 posts, 30 replies

# ============================================
# CLEANUP JOB
# ============================================
# Cron schedule for deleting expired posts (in cron format)
# Default: Every hour at minute 0
CLEANUP_CRON=0 * * * *

# Examples:
# Every 30 minutes: */30 * * * *
# Every 6 hours: 0 */6 * * *
# Daily at 3am: 0 3 * * *
# Every Sunday at midnight: 0 0 * * 0

# ============================================
# PUSH NOTIFICATIONS
# ============================================
# Push notification service configuration (future use)
# PUSH_SERVICE_KEY=your_firebase_or_apns_key_here
# PUSH_SERVICE_URL=https://fcm.googleapis.com/v1/projects/your-project/messages:send

# ============================================
# DEVELOPMENT / TESTING
# ============================================
# Uncomment these for local development

# NODE_ENV=development
# PORT=3000
# DATABASE_URL=postgresql://postgres:postgres@localhost:5432/crabiner_dev
# ALLOWED_ORIGINS=http://localhost:3000
# DISABLE_RATE_LIMIT=true

# ============================================
# OPTIONAL: LOGGING
# ============================================
# LOG_LEVEL=debug
# LOG_FILE=./logs/app.log

# ============================================
# NOTES
# ============================================
# 1. Generate encryption key:
#    node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# 2. Test SMTP connection before going live:
#    node -e "const nodemailer = require('nodemailer'); const t = nodemailer.createTransport({host:'smtp.example.com',port:587,auth:{user:'user',pass:'pass'}}); t.verify().then(console.log).catch(console.error);"
#
# 3. Secure this file:
#    chmod 600 .env
#
# 4. Never commit .env to git:
#    Make sure .env is in .gitignore
#
# 5. For production, consider using environment variables directly
#    or a secrets manager (AWS Secrets Manager, HashiCorp Vault, etc.)